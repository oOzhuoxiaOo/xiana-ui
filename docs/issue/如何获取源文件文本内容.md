---
title: 如何获取源文件文本内容
description: 使用 Vite 的 ? raw 查询参数获取文件内容作为字符串
---

# 如何获取源文件文本内容

在 VitePress 文档中，我们经常需要展示组件的源码。本文将介绍如何使用 Vite 的 `?raw` 查询参数来获取源文件的文本内容。

## 方法一：使用 Vite 的 ? raw 查询参数

### 1. 配置 Vite

首先在 `vite.config.ts` 中添加插件支持：

```typescript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import path from "path";

export default defineConfig({
  plugins: [
    vue(),
    {
      name: "raw-loader",
      transform(code, id) {
        if (id.includes("?raw")) {
          console.log("code", code);
          return {
            code: `export default ${JSON.stringify(code)}`,
            map: null,
          };
        }
      },
    },
  ],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
});
```

### 2. 创建演示组件

创建一个用于演示的 Vue 组件：

```vue
<!-- src/components/demos/ButtonDemo.vue -->
<template>
  <div class="tw-flex tw-gap-3 tw-flex-wrap tw-w-full">
    <Button variant="default">
      <span>default</span>
    </Button>
    <Button variant="destructive">
      <span>destructive</span>
    </Button>
    <Button variant="ghost">
      <span>ghost</span>
    </Button>
    <Button variant="link">
      <span>link</span>
    </Button>
    <Button variant="outline">
      <span>outline</span>
    </Button>
    <Button variant="secondary">
      <span>secondary</span>
    </Button>
  </div>
</template>

<script setup>
import Button from "@/components/ui/button/Button.vue";
</script>
```

### 3. 在文档中使用

在 Markdown 文件中导入文件内容：

```vue
<!-- docs/components/button.md -->
<script setup>
import Button from "@/components/ui/button/Button.vue";
import DemoBlock from "@/components/ui/demo-block/DemoBlock.vue";
import ButtonDemo from "@/components/demos/ButtonDemo.vue";
// 使用 ?raw 查询参数获取文件内容
import buttonDemoCode from "@/components/demos/ButtonDemo.vue?raw";

const BTN_BASE = buttonDemoCode;
</script>

# Button 按钮
## 变体

<ClientOnly>
    <DemoBlock :code="BTN_BASE">
        <ButtonDemo />
    </DemoBlock>
</ClientOnly>
```
